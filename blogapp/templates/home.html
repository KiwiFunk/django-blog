{% extends 'base.html' %}

{% block content %}

<h1>Posts:</h1>

{% for post in object_list %}
    <a href="{% url 'post_details' post.pk %}"><h2>{{ post.title }}</h2></a>
    <h5>{{ post.author }}</h5>
    <h6>
        <a href="{% url 'category' post.category|lower|slugify %}">{{ post.category }}</a> | 
        Published: {{ post.created_at|date:"DATE_FORMAT" }} | 
        <span class="d-inline-flex gap-3">
            <span class="d-inline-flex align-items-center gap-1">
                <i class="bi bi-hand-thumbs-up text-muted"></i>
                <small>{{ post.total_likes }}</small>
            </span>
            <span class="d-inline-flex align-items-center gap-1">
                <i class="bi bi-hand-thumbs-down text-muted"></i>
                <small>{{ post.total_dislikes }}</small>
            </span>
        </span>
    </h6>
    {% if post.summary %}
        <p>{{ post.summary }}</p>
    {% else %}
        <p>{{ post.body|safe|truncatewords:40 }}</p>
    {% endif %}
    <hr>
{% endfor %}

{% endblock %}